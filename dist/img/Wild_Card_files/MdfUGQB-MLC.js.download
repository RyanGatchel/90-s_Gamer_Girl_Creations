if (self.CavalryLogger) { CavalryLogger.start_js(["kDRh5"]); }

__d("SearchFunnelTypeaheadLogger",["csx","Banzai","DOM","Event","PageTransitions","SubscriptionsHandler","URI"],(function(a,b,c,d,e,f,g){"use strict";var h,i="search_funnel",j={focus:"entrant",render:"results_displayed",keydown:"interaction",select:"search"};a={init:function(a,c){if(!a||!c)return;this._isColdStart=!0;this._sampleRates=c;this._core=a.getCore();this._data=a.getData();this._view=a.getView();this._handler=new(b("SubscriptionsHandler"))();this.log=this.log.bind(this);this.onKeydown=this.onKeydown.bind(this);this.onSelect=this.onSelect.bind(this);this.onTypeaheadImpression=this.onTypeaheadImpression.bind(this);this._transitionInProgress=!0;this.onTypeaheadImpression()},onTypeaheadImpression:function(a){var c=this;this._initTime=this._getInitTime();this.e2eMarkers=[];this._transitionInProgress&&b("DOM").scry(document.body,"._4d3w").length===0&&this.log("impression",{funnel_path:(h||(h=b("URI"))).getNextURI().getPath()});this.reset();this._handler.addSubscriptions(this._core.subscribeOnce("focus",this.log),this._view.subscribeOnce("render",this.log),this._view.subscribeOnce("select",this.onSelect));b("Event").listen(this._core.getElement(),"keydown",this.onKeydown);b("PageTransitions").registerHandler(function(){c._transitionInProgress=!0});b("PageTransitions").registerCompletionCallback(this.onTypeaheadImpression)},onKeydown:function(a){this._sawKeydown||(this._sawKeydown=!0,this.log("keydown",a))},onSelect:function(a,c){c.funnel_data={selected_position:c.selected.globalIndex,selected_type:c.selected.type},c.selected.isNullState?c.funnel_data.interaction_type="null_state":c.selected.isSingleState?c.funnel_data.interaction_type="single_state":c.funnel_data.interaction_type="typed",this._endToEndPath=(h||(h=b("URI"))).getMostRecentURI().getPath(),this.log(a,c)},reset:function(){this._handler.release(),this._handler.engage(),this._sawKeydown=!1,this._transitionInProgress=!1},log:function(a,c){j[a]&&(a=j[a]);this.e2eMarkers.push({event:a,time:String(Date.now()-this._initTime)});if(!this._sampleRates[a])return;c=c||{};c.funnel_data=c.funnel_data||{};c.funnel_data.sample_rate=this._sampleRates[a];c.funnel_data.current_event_time=Date.now();this._prevTime&&this._prevEvt&&(c.funnel_data.previous_event_time=this._prevTime,c.funnel_data.previous_event=this._prevEvt);this._prevTime=c.funnel_data.current_event_time;this._prevEvt=a;b("Banzai").post(i,{funnel_data:c.funnel_data,path:c.funnel_path||b("PageTransitions").getMostRecentURI().getPath(),stage:a},b("Banzai").VITAL)},_getInitTime:function(){if(window.ExitTime)return window.ExitTime;var a=window.performance||window.msPerformance;return!a||!a.timing?void 0:a.timing.navigationStart}};e.exports=a}),null);
__d("XAdsIntegrityNewIPCContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ads/integrity/ajax/new_ipc_content/",{})}),null);